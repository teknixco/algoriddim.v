//+------------------------------------------------------------------+
//|                          Vic & Nana Expert Advisor                |
//|            Copyright 2024-2025, Vic & Nancy, LLC                  |
//|                    http://www.github.com/victorekpo               |
//+------------------------------------------------------------------+
#property copyright   "2024-2025, Vic & Nancy"
#property link        "http://www.github.com/victorekpo"
#property description "Million Dollar BOT for BOOM Index"

//--- Import Libraries
#include <EA-COMMON.mq5>

//+------------------------------------------------------------------+
//| OnTick function                                                  |
//+------------------------------------------------------------------+
void OnTick()
  {

// Check Levels First
   CheckLevels();

// check bar sizes as well
// Comment("howclose:  L1 ", howClosetoLow, " H1 ", howClosetoHigh, " = ", howClose, "**", " L5 ", howClosetoLow_5, " H5 ", howClosetoHigh_5, " = ", howClose_5, "**", " L15 ", howClosetoLow_15, " H15 ", howClosetoHigh_15, " = ", howClose_15, "**", " L30 ", howClosetoLow_30, " H30 ", howClosetoHigh_30,  " = ", howClose_30, "**"," L240 ", howClosetoLow_240, " H240 ", howClosetoHigh_240,  " = ", howClose_240, "**"," L999 ", howClosetoLow_999, " H999 ",howClosetoHigh_999,  " = ", howClose_999, "**");
//Comment("recentprofit ", calculateSymbolProfitRecent(), " shouldBEAR: ", shouldAllowFromBEAR, " shouldRSI: ", shouldAllowSellFromRSI, " shouldRSI_5: ", shouldAllowSellFromRSI5, " shouldRSI_15: ", shouldAllowSellFromRSI15, " shouldRSI_30: ", shouldAllowSellFromRSI30, " shouldRSI_60: ", shouldAllowSellFromRSI60, " shouldRSI_240: ", shouldAllowSellFromRSI240, " bar size 15 ", getBarSize(15), " bar size 30 ", getBarSize(30), " bar size 60 ", getBarSize(60), " bar size 4hr ", getBarSize(240), " bar size 999 ", getBarSize(999), " how_close_999_h_l ", howClosetoHigh_999, " / ", howClosetoLow_999, " how_close_240 ", howClosetoHigh_240, " / ", howClosetoLow_240, " how_close_60 ", howClosetoHigh_60, " / ", howClosetoLow_60, " how_close ", howClosetoHigh, " / ", howClosetoLow, " MAXOrders ", MAXOrders, " percClose 999 ",percClose_999, " percClose 240 ",percClose_240, " percClose 60 ",percClose_60, " percClose_30 ", percClose_30,  " percClose_15 ", percClose_15, " percClose_5 ", percClose_5, " percClose ", percClose, " isTrend? ", isBoomTrendingDown);
//  Comment(rsiVelocity, " ", priceVelocity);
   Comment("howClose, M1: ",howClose[M1],
           " M5: ",howClose[M5],
           " M15: ",howClose[M15],
           " M30: ",howClose[M30],
           " H1: ",howClose[H1],
           " H4: ",howClose[H4],
           " D: ",howClose[D1],
           " W: ",howClose[W1],
           " MN: ",howClose[MN1],
           " shouldRSI: ", shouldAllowSellFromRSI[M1],
           " shouldRSI5: ", shouldAllowSellFromRSI[M5]
          );

// close orders in profit
   double leastMinProfit = 0.5;
   double aggregateProfit = 3;
   closeInProfit(false,calculateTakeProfit());
   closeAggregateInProfit(true,calculateTakeProfit() * aggregateProfit,leastMinProfit);

// take orders
   if(checkAccountEquity(100))
     {
      CheckForOpenMAConditions();
      CheckForOpenRSIConditions();
      CheckForOpenMARSIConditions();
      CheckForOpenSell();
      CheckForOpenSellDaily_Bear();
      CheckForOpenSellMA_Driven();
      CheckForOpenSellMA_Driven2();
      CheckForOpenSellRSI_Driven();
      CheckForOpenSellRSI_MA_Driven();
      CheckForOpenSellRSI_MA_Driven2();
      CheckForOpenRSIMAStoch();
     }

   if(checkAccountEquity(300))
     {
      CheckForOpenBuy();
      CheckForOpenBuy2();
      CheckForOpenBuy3();
      CheckForOpenBuy4();
      CheckForOpenBuy5();
      CheckForOpenBuy_ExtremeRSI();
     }

//Alert("MA 1,9: ",getMA(M1,_9));
// Alert("RSI: ", getRSI(M1));
  }


//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenMAConditions()
  {
   if(
      baseConditionsForSellOrder()
      && MAConditionsForSellOrder()
      && shouldAllowSellFromRSI[M1]
      && getRSI(M1) > 45
      && getMA(M1, _50) > getHighestPrice(1, 1)
      && getMA(M5, _20) > getHighestPrice(5, 1)
   )
     {
      placeSellOrder(orderLots, "SellMA", 100);
     }
  }


//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenRSIConditions()
  {
   if(
      baseConditionsForSellOrder()
      && RSIConditionsForSellOrder()
      && !(getMA(M1, _50) < getLowestPrice(M1, 1) && getMA(M1, _200) < getLowestPrice(M1, 1))
      && !(getMA(M30, _50) < getLowestPrice(M1, 1))
      && isThisBarBEARISH()
      && ((isThisBarBEARISH(5) && isThisBarBEARISH(15))
          || getMA(M30, _50) > getHighestPrice(M30, 1))
   )
     {
      placeSellOrder(orderLots, "SellRSI", 200);
     }
  }


//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenMARSIConditions()
  {
   if(
      baseConditionsForSellOrder()
      && MAConditionsForSellOrder()
      && RSIConditionsForSellOrder()
   )
     {
      placeSellOrder(orderLots, "SellMARSI", 300);
     }
  }

//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenSell()
  {
   if(
      baseConditionsForSellOrder()
      && (isThisBarBEARISH(999) || isThisBarBEARISH(240))
      && MAConditionsForSellOrder()
      && RSIConditionsForSellOrder()
   )
     {
      placeSellOrder(orderLots, "Sell", MILLIONDOLLARBOT);

     }
  }

//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenSellDaily_Bear()
  {
   if(
      baseConditionsForSellOrder()
      && isThisBarBEARISH(240) && getBarSize(240) > 5
      && isThisBarBEARISH(999) && getBarSize(999) > 5
      && MAConditionsForSellOrder()
      && RSIConditionsForSellOrder()
   )
     {
      placeSellOrder(orderLots, "SellDB", MILLIONDOLLARBOT);
     }
  }


//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenSellMA_Driven()
  {
   if(
      (getMA(M1, _50) - currentPrice > 2 || getMA(M1, _200) > currentPrice || (isThisBarBEARISH(240) && isThisBarBEARISH(60) && isThisBarBEARISH(30) && isThisBarBEARISH(15) && getMA(M5, _20) > currentPrice && getMA(M1, _20) > currentPrice && getMA(M1, _9) > currentPrice))
      && isThisBarBEARISH(5)
      && isThisBarBEARISH(15)
      && getBarSize(15) > 3
      && getRSI(M1) > 40
      && getMA(M1, _200) > getHighestPrice(M1,1)
      && getMA(M5, _200) > getHighestPrice(M5,1)
      && getMA(M15, _200) > getHighestPrice(M15,1)
      && getMA(M1, _20) - getMA(M1, _9) > 1
      && (getMA(M15, _20) - getMA(M15, _50) > 3 || getMA(M5, _20) - getMA(M5, _9) > 3)
      && (getMA(M1, _50) > getHighestPrice(M1,1) || getMA(M1, _200) > getHighestPrice(M1,1))
      && getMA(M1, _20) < getMA(M1, _50)
      && getMA(M1, _20) > getHighestPrice(M1,1)
      && (shouldAllowFromBEAR || getMA(M1, _50) > currentPrice || getMA(M1, _200) > currentPrice || (isThisBarBEARISH(240) && isThisBarBEARISH(60) && isThisBarBEARISH(30) && isThisBarBEARISH(15) && getMA(M5, _20) > currentPrice && getMA(M1, _20) > currentPrice && getMA(M1, _9) > currentPrice))
      && howClose[M1] < 0.5
      && howClose[M5] < 2
   )
     {
      placeSellOrder(orderLots, "SellMD", MILLIONDOLLARBOT);
     }
  }


//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenSellMA_Driven2()
  {
   if(
      getMA(M1, _50) > currentPrice
// && (getMA(M1, _9) > getHighestPrice(M1,1) || checkAccountEquity(1000))
      && getMA(M1, _200) > currentPrice
      && getMA(M5, _20) > currentPrice
      && getMA(M5, _9) > currentPrice
      && getMA(M5, _200) > currentPrice
      && getMA(M15, _50) > currentPrice
      && getMA(M15, _20) > currentPrice
      && getMA(M15, _50) > currentPrice
      && getMA(M15, _200) > currentPrice
      && getMA(M30, _9) > currentPrice
      && getMA(M30, _20) > currentPrice
      && getMA(M30, _50) > currentPrice
      && getMA(M1, _20) < getMA(M1, _50)
      && (getRSI(M1) > 50 || getRSI(M5) > 50)
      && howClose[M5] < 2
      && isThisBarBEARISH()
      && isThisBarBEARISH(5)
      && (getMA(M5, _200) > currentPrice || getMA(M15, _50) > getMA(M15, _20) || getMA(M1, _50) > getMA(M1, _20))
      && getMA(M1, _20) - getMA(M1, _9) > 1
      && getMA(M15, _20) - getMA(M15, _50) > 3
   )
     {
      placeSellOrder(orderLots, "SellMD2", MILLIONDOLLARBOT);
     }
  }

//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenSellRSI_Driven()
  {
   if(
      baseConditionsForSellOrder()
      && isThisBarBEARISH()
      && (getRSI(M1) > 40 || getRSI(M15) > 60)
      && (getRSI(M1) > 45 || checkAccountEquity(1000))
      && getRSI(M5) > 35
      && (getRSI(M5) > 45 || checkAccountEquity(1000))
      && getRSI(M15) > 35
      && (getRSI(M15) > 45 || checkAccountEquity(1000))
      && getRSI(M30) > 35
      && (getRSI(M30) > 45 || checkAccountEquity(1000))
      && getRSI(H1) > 35
      && (getRSI(H1) > 45 || checkAccountEquity(1000))
      && getRSI(H4) > 35
      && (isThisBarBEARISH(H1) || isThisBarBEARISH(M30))
      && (isThisBarBEARISH(D1) || isThisBarBEARISH(M30))
      && (isThisBarBEARISH(W1) || isThisBarBEARISH(M30))
      && getMA(M5, _9) > getHighestPrice(M5,1)
      && getMA(M5, _9) > getHighestPrice(M5,1)
      && MAConditionsForSellOrder()
      && shouldAllowSellFromRSI[M1]
   )
     {
      placeSellOrder(orderLots, "SellRD", MILLIONDOLLARBOT);
     }
  }

//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenSellRSI_MA_Driven()
  {
   if(
      isThisBarBEARISH(M5)
      && isThisBarBEARISH(M15)
      && howClose[D1] < -7
      && (getRSI(M1) > 30 || getRSI(M15) > 60)
      && (getRSI(M1) > 33 || getRSI(M5) > 35)
      && (getRSI(M1) > 45 || checkAccountEquity(1000))
      && (getRSI(M5) > 45 || checkAccountEquity(1000))
      && (getRSI(M15) > 45 || checkAccountEquity(1000))
      && (isThisBarBEARISH(H1) || isThisBarBEARISH(M30))
      && (isThisBarBEARISH(D1) || isThisBarBEARISH(H1))
      && (isThisBarBEARISH(W1) || isThisBarBEARISH(M30))
      && getMA(M5, _9) > getHighestPrice(M5,1)
      && getMA(M5, _9) > getHighestPrice(M5,1)
// && (getMA(M1, _9) > getHighestPrice(M1,1) || checkAccountEquity(1000))
      && getMA(M1, _20) > getHighestPrice(M1,1)
      && MAConditionsForSellOrder()
      && getRSI(M1) > 45
   )
     {
      placeSellOrder(orderLots, "SellRMD", MILLIONDOLLARBOT);
     }
  }

//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenSellRSI_MA_Driven2()
  {
   if(
      baseConditionsForSellOrder()
      && isThisBarBEARISH()
      && isThisBarBEARISH(M15)
      && (getRSI(M1) > 30 || getRSI(M15) > 50)
      && (getRSI(M1) > 33 || getRSI(M5) > 45)
      && (getRSI(M1) > 45 || checkAccountEquity(1000))
      && getRSI(M5) > 45
      && (getRSI(M5) > 55 || checkAccountEquity(1000))
      && (getRSI(M15) > 50 || checkAccountEquity(1000))
      && (getRSI(M30) > 50 || checkAccountEquity(1000))
      && (getRSI(H1) > 50 || checkAccountEquity(1000))
      && getRSI(W1) > 40
      && (isThisBarBEARISH(H1) || isThisBarBEARISH(M30))
      && (isThisBarBEARISH(D1) || isThisBarBEARISH(H1))
      && (isThisBarBEARISH(W1) || isThisBarBEARISH(M30))
      && (getMA(M5, _9) > getHighestPrice(M5,1) || getMA(M5, _200) > getHighestPrice(M5,1) || getMA(M15, _50) > getHighestPrice(M15,1) || getMA(M1, _50) > getHighestPrice(M1,1))
// && (getMA(M1, _9) > getHighestPrice(M1,1) || checkAccountEquity(1000))
      && (getMA(M5, _20) > getHighestPrice(M5,1) || checkAccountEquity(1000))
      && (getMA(M15, _50) > getHighestPrice(M15,1) || checkAccountEquity(1000))
      && (getMA(M15, _20) > getHighestPrice(M15,1) || checkAccountEquity(1000))
      && MAConditionsForSellOrder()
      && !(getMA(M1, _50) < getHighestPrice(M1, 1) || getMA(M1, _20) < getHighestPrice(M1, 1) || getMA(M1, _9) < getHighestPrice(M1,1))
   )
     {
      placeSellOrder(orderLots, "SellRMD2", MILLIONDOLLARBOT);
     }
  }

//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenRSIMAStoch()
  {
   if(
      isThisBarBEARISH()
      && isThisBarBEARISH(60)
      && getBarSize(60) > 5
      && isThisBarBEARISH(240)
      && getBarSize(240) > 5
      && isThisBarBEARISH(999)
      && getBarSize(999) > 20
      && shouldAllowSellFromRSI[M1]
      && getMA(H4, _20) > getHighestPrice(H4,1)
      && getMA(H4, _50) > getHighestPrice(H4,1)
      && getMA(H1, _200) > getHighestPrice(H1,1)
      && getMA(M30, _200) > getHighestPrice(M30,1)
      && getMA(M15, _50) > getHighestPrice(M15,1)
      && (getMA(M15, _20) > getHighestPrice(M15,1) || getMA(M15, _9) > getHighestPrice(M15,1))
      && getStochasticMain(15) > 20
      && getStochasticMain(30) > 20
   )
     {
      placeSellOrder(orderLots, "SellRMS", MILLIONDOLLARBOT);
     }
  }



//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenBuy()
  {
   if(
      isThisBarBULLISH(H4)
      && isThisBarBULLISH(H1)
      && isThisBarBULLISH(M30)
      && (howClose[H4] > 7 || isThisBarBULLISH(W1))
      && ((getRSI(M1) < 20 || getRSI(M5) < 30 || getRSI(M15) < 30 || getRSI(M30) < 30 || getRSI(H1) < 30 || getRSI(H4) < 30 || getRSI(W1) < 30)
          || (isThisBarBULLISH(M15) && isThisBarBULLISH(M30) && isThisBarBULLISH(H1) && getRSI(M1) < 35)
         )
      && (getRSI(M1) < 60 && getRSI(M5) < 60 && getRSI(M15) < 60 && getRSI(M30) < 60 && getRSI(H1) < 60 && getRSI(H4) < 60 && getRSI(W1) < 60)
      && getMA(M5, _9) < getLowestPrice(M5, 1)
      && getMA(M5, _20) < getLowestPrice(M5, 1)
      && (getMA(M5, _9) < getLowestPrice(M5, 1) || getMA(M5, _200) < getLowestPrice(M5, 1))
      && (getMA(M1, _200) < getLowestPrice(M1, 1) || getMA(M5, _50) < getLowestPrice(M5, 1))
      && (getMA(M1, _50) < getLowestPrice(M1, 1) || getMA(M1, _200) < getLowestPrice(M1, 1))
      && ((getMA(M1, _9) < getLowestPrice(M1, 1) && getMA(M1, _20) < getLowestPrice(M1, 1))
          || (isThisBarBULLISH(5) || isThisBarBULLISH(15) || isThisBarBULLISH(30) || isThisBarBULLISH(60) || checkAccountEquity(5000)))
   )
     {
      placeBuyOrder(orderLots, "Buy", MILLIONDOLLARBOT);
     }
  }

//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenBuy2()
  {
   if(
      ((isThisBarBULLISH(H4) && getBarSize(H4) > 20) || (isThisBarBULLISH(W1) && getBarSize(W1) > 20))
      && (getRSI(M1) < 20 || getRSI(M5) < 20 || getRSI(M15) < 20 || getRSI(M30) < 20 || getRSI(H1) < 20 || getRSI(H4) < 20 || getRSI(W1) < 20)
      && (getMA(H1, _20) < getLowestPrice(H1, 1) || checkAccountEquity(1000))
      && (getMA(H1, _50) < getLowestPrice(H1, 1) || checkAccountEquity(1000))
      && (getMA(M5, _9) < getLowestPrice(H1, 1) || getMA(M1, _50) < getLowestPrice(M1, 1))
      && (getMA(M5, _20) < getLowestPrice(H1, 1) || getMA(M1, _50) < getLowestPrice(M1, 1))
   )
     {
      placeBuyOrder(orderLots, "Buy2", MILLIONDOLLARBOT);
     }
  }

//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenBuy3()
  {
   if(
      ((isThisBarBULLISH(H4) && getBarSize(H4) > 20) || (isThisBarBULLISH(W1) && getBarSize(W1) > 20))
      && (getRSI(M1) < 5 || getRSI(M5) < 10 || getRSI(M15) < 10 || getRSI(M30) < 10 || getRSI(H1) < 10 || getRSI(H4) < 10 || getRSI(W1) < 10)
      && (getMA(M5, _9) < getLowestPrice(H1, 1) || getMA(M1, _50) < getLowestPrice(M1, 1))
      && (getMA(M5, _20) < getLowestPrice(H1, 1) || getMA(M1, _50) < getLowestPrice(M1, 1))
   )
     {
      placeBuyOrder(orderLots, "Buy3", MILLIONDOLLARBOT);
     }
  }

//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenBuy4()
  {
   if(
      ((isThisBarBULLISH(H4) && getBarSize(H4) > 20) || (isThisBarBULLISH(W1) && getBarSize(W1) > 20))
      && getMA(H4, _20) > getHighestPrice(H4, 1)
      && getRSI(M1) <= 30
      && (getRSI(M5) <= 40 || getRSI(M15) <= 40)
      && (getMA(M1, _20) < getLowestPrice(M1, 1) || getMA(M1, _200) < getLowestPrice(M1, 1))
      && ((getMA(M1, _9) < getLowestPrice(M1, 1) && getMA(M1, _20) < getLowestPrice(M1, 1))
          || (isThisBarBULLISH(5) || isThisBarBULLISH(15) || isThisBarBULLISH(30) || isThisBarBULLISH(60) || checkAccountEquity(5000)))

   )
     {
      placeBuyOrder(orderLots, "Buy4", MILLIONDOLLARBOT);
     }
  }

//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenBuy5()
  {
   if(
      getRSI(M1) < 30
      && (getRSI(M5) < 32 || getRSI(M15) < 32 || (checkAccountEquity(1000) && getRSI(M5) < 45))
      && (getMA(M1, _20) < getLowestPrice(M1,1) || getMA(M5, _20) < getLowestPrice(M5,1) || getMA(M15, _20) < getLowestPrice(M15,1) || getMA(M30, _20) < getLowestPrice(M30,1) || getMA(H1, _20) < getLowestPrice(H1,1) || getMA(H4, _20) < getLowestPrice(H4,1))
      && (getRSI(H1) < 50 || checkAccountEquity(1000))
      && getRSI(H1) < 45
      && (getRSI(MN1) < 50 || checkAccountEquity(1000))
      && (getMA(M1, _500) < getLowestPrice(M1,1) || checkAccountEquity(1000))
      && getStochasticSignal(M5) < getStochasticMain(M5)
   )
     {
      placeBuyOrder(orderLots, "Buy5", MILLIONDOLLARBOT);
     }
  }


//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void CheckForOpenBuy_ExtremeRSI()
  {
   if(
      shouldPrepareForSellReverse[M1]
      && (getMA(M1, _9) < getLowestPrice(M1, 1)
          || getMA(M1, _20) < getLowestPrice(M1, 1)
          || getMA(M1, _50) < getLowestPrice(M1, 1))
   )
     {
      placeBuyOrder(orderLots, "BuyXR", MILLIONDOLLARBOT);
     }
  }
//+------------------------------------------------------------------+
